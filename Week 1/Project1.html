<!--
    Assignment Name: Project1
    
    Assignment Info:
    
    1) Create a web page with a canvas, buttons, and text
    2) Draw colored rectangles in the canvas at specific locations
    3) Spawn and simulate gravity applied to the rectangles
    4) Keep track of some basic statistics and display them to the screen

    
    Student Name: Florencio Mendez-Lazaro
    
    Student Email: lemendez@csumb.edu
    
    Date: 1/23/2026
    
    Class: CST325-80_2262
-->

<!DOCTYPE html>
<html>
    <head>
        <script>
            var myCanvas;
            var canvasCXT;
            
            var sceneList = [];
            
            var frameNum = 0;     
            
            function init(){
                console.log("Hello World!");
            
                myCanvas = document.getElementById("project1_Canvas");
                canvasCXT = myCanvas.getContext("2d");
            
                var myRectangle = new Rectangle(20, 20, "rgb(0, 255, 0)");
                var myRectangle2 = new Rectangle(100, 20, "rgb(0, 255, 0)");
                var myRectangle3 = new Rectangle(180, 20, "rgb(0, 255, 0)");                
            
                sceneList.push(myRectangle);
                sceneList.push(myRectangle2);
                sceneList.push(myRectangle3);                
            
                updateAndDraw();
            }
            
            class Rectangle{
                constructor(x, y, color){
                    this.x = x;
                    this.y = y;
                    this.color = color;
                    this.draw = function(){
                        canvasCXT.strokeRect(this.x, this.y,50, 50);
                        canvasCXT.fillStyle = this.color;
                        canvasCXT.fillRect(this.x, this.y, 50, 50);
                    }

                    this.velocity = {
                        x : 0, y : 0
                    };

                    this.update = function(){
                        this.velocity.y = this.velocity.y + 1;
                        this.y = this.y + this.velocity.y * 0.16;
                    }
                }
            }
            
            function updateAndDraw(){
                var randX = Math.random() * (myCanvas.width - 50);
                var randY = Math.random() * (myCanvas.width - 50);

                var randR = Math.floor(Math.random() * 256);
                var randG = Math.floor(Math.random() * 256);
                var randB = Math.floor(Math.random() * 256);

                var randColor = "rgb(" + randR + ", " + randG + ", " + randB + ")";
                var myRandRectangle = new Rectangle(randX, randY, randColor);
                sceneList.push(myRandRectangle);

                frameNum++;
            
                console.log("Frame: ", frameNum);
            
                canvasCXT.clearRect(0, 0, myCanvas.width, myCanvas.height);
            
                for(var i = 0; i < sceneList.length; i++){
                    sceneList[i].draw();
                }
            
                updateStats();
                requestAnimationFrame(updateAndDraw);
            }
            
            function updateStats(){
                var p = document.getElementById("frameCount");
                p.innerText = "Frame Count: " + frameNum;
            
                var p = document.getElementById("rectangleCount");
                p.innerText = "Rectangle Count: " + sceneList.length;
            }
        </script>
    </head>
    <body onload="init()">
        <canvas id="project1_Canvas" width="300" height="200" style="border:1px solid gray"></canvas>
        <br>
        <p id="frameCount">Frame Count: 0</p>
        <p id="rectangleCount">Rectangle Count: 0</p>
    </body>
</html>